@import 'colors';
@import 'utilities';

.section__music {
	font-family: $body-font_emblem;
}
.section__music ._music .ata-music {
	.transport {
		background-color: $yellow;
		box-sizing: border-box;
		height: calc(100vh - 6.25rem); /* view height - topnav - emblem nav */
		padding: 0 1rem;
		width: calc(50vw/12 * 2);
		/*z-index: 10;*/ /* music page SVG overlaps with transport controls */
		outline: 5px solid black;
		.atalanta-notation-start, 
		.atalanta-notation-stop, 
		.atalanta-notation-mute-track, 
		.atalanta-notation__switch {
			background-image: none;
			color: green;
			float: none;
			font-size: .875rem;
			height: auto;
			line-height: 1.2;
			margin: 0;
			padding: 0;
			text-align: center;
			width: 100%;
		}
		button > div {
outline: 1px solid purple;
		}
		button > div:nth-child(1) {
			background-position: center;
			background-repeat: no-repeat;
			background-size: contain;
			margin-bottom: .5rem;
		}
		.atalanta-notation-start, 
		.atalanta-notation-stop {
			outline: 5px solid green;
		}
		.atalanta-notation-start.playing {
		  display: none;
		}
		.play-btn__icon {
			background-image: url('../icons/icon_play-outline.svg');
			filter: hue-rotate(166deg) saturate(.32);
			height: 2.5rem;
		}
		.play-btn__icon:hover {
			background-image: url('../icons/icon_play-filled.svg');
			transition: .3s;
		}
		.play-btn__label {
			
		}
		.pause-btn__icon {
			background-image: url('../icons/icon_pause-outline.svg');
			filter: hue-rotate(166deg) saturate(.32);
		}
		.atalanta-notation-stop.playing .pause-btn__icon {
			background-image: url('../icons/icon_pause-outline.svg');
		}
		.atalanta-notation-stop.playing:hover .pause-btn__icon {
			background-image: url('../icons/icon_pause-filled.svg');
			transition: .3s;
		}
		.pause-btn__label {

		}
		.atalanta-notation-start:hover .play-btn__label, 
		.atalanta-notation-stop:hover .pause-btn__label {
			color: $yellow_inverse;
			transition: .3s;
		}
		.track-mute {
outline: 5px solid red;
		}
		.atalanta-notation-mute-track {

		}
		.mute-btn__icon {
			background-image: url('../icons/icon_volume-outline.svg');
			filter: hue-rotate(166deg) saturate(.32);
			height: 2rem;
		}
		.mute-btn__icon:hover {
			background-image: url('../icons/icon_volume-filled.svg');
			transition: .3s;
		}
		.mute-btn__label {

		}
		.atalanta-notation-mute-track:hover .mute-btn__label {
			color: $yellow_inverse;
			transition: .3s
		}
		.atalanta-notation-mute-track.mute .mute-btn__icon {
			background-image: url('../icons/icon_profile-mute-outline.svg');
		}
		.atalanta-notation-mute-track.mute:hover .mute-btn__icon {
			background-image: url('../icons/icon_profile-mute-filled.svg');
			transition: .3s;
		}
		.atalanta-notation__switch {
		/*	display: flex;
			align-items: center;
			flex-direction: column;*/
		}
		.atalanta-notation__switch a {
			color: red;
			display: flex;
			align-items: center;
			justify-content: center;
			flex-direction: column;
			font-size: .875rem;
			height: 100%;
			line-height: 1.2;
			text-align: center;
			width: 100%;
		}
		.piano-roll__icon {

		}
		.piano-roll__label {

		}
	}
	.ata-viz-cmn {
outline: 5px solid green;
/*		background-color: blue;*/
		background: no-repeat;
  		background-size: contain;
		overflow: hidden;
	}
	.ata-viz-pianoroll {
		overflow: hidden;
	}
}

/* notation */
.section__music {
	.ata-viz-cmn .music-pages .music-page {
	  text-align: center;
	  transform-origin: 0 0;
	  overflow: hidden;
	  width: 100%; /* where am I overriding this from??? */
	}
	.music-page > svg {
		float: left;
		transform-origin: 0 0;
	}
	.music-pages {
		padding-bottom: 6rem;
	}
	.music-page:nth-of-type(1) {
		margin-top: -8rem;
	}
	.music-page:nth-of-type(2) {
		margin-top: -4rem;
	}
}


/* Playing notes */
.ata-viz-cmn svg .note.highlighted {
  fill: $yellow_inverse;
}
.ata-viz-cmn svg .note.highlighted path {
  stroke: $yellow_inverse;
}


@supports (display: grid) {
	.section__music ._music {
		display: grid;
		grid-template-columns: repeat(12, 1fr);
		grid-template-rows: auto;
	}
	.section__music ._music .ata-music {
		display: grid;
		grid-area: 1 / 1 / 2 / 13;
		grid-template-columns: repeat(12, 1fr);
		grid-template-rows: auto;
		.transport {
			display: grid;
			grid-template-columns: 1fr;
			grid-template-rows: 1fr 3fr 1fr;
			grid-area: 2 / 1 / 3 / 3;
			.atalanta-notation-start, 
			.atalanta-notation-stop {
				grid-column: 1 / 2;
				grid-row: 1 / 2;
			}
			.track-mute {
				display: grid;
				grid-template-rows: 1fr 1fr 1fr;
				grid-row: 2 / 3;
			}
			.atalanta-notation-mute-track:nth-child(1) {
				grid-row: 1 / 2;
			}
			.atalanta-notation-mute-track:nth-child(2) {
				grid-row: 2 / 3;
			}
			.atalanta-notation-mute-track:nth-child(3) {
				grid-row: 3 / 4;
			}
			.atalanta-notation__switch {
				grid-row: 3 / 4;
			}
		}
		
		.ata-viz-cmn {
			display: grid;
			grid-area: 2 / 4 / 3 / 13;
			grid-template-columns: repeat(12, 1fr);
			grid-template-rows: auto;
		}
		.ata-viz-pianoroll {
			grid-area: 3 / 2 / 4 / 12;
		}
	}
	.section__music {
		.music-pages {
			display: grid;
			grid-area: 1 / 1 / 2 / 13;
			grid-template-columns: repeat(12, 1fr);
			grid-template-rows: auto;
		}
		.music-page:nth-of-type(1) {
			grid-area: 1 / 1 / 2 / 13;
		}
		.music-page:nth-of-type(2) {
			grid-area: 2 / 1 / 3 / 13;
		}
	}
}

@supports not (display: grid) {
	.section__music ._music .ata-music {
		.transport {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
		}
		.track-mute {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: space-between;
		}
	}
}

<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Furnace and Fugue</title>
	<link type="text/css" rel="stylesheet" media="screen" href="../assets/css/app.css">
<!-- 	<link type="text/css" rel="stylesheet" media="screen" href="../assets/css/styles.css" /> -->
</head>
<body>
<!-- GLOBAL NAVIGATION -->
	<header data-page-type="search">
		<div class="_topnav" data-nav="search">
			<nav class="topnav">
				<button aria-hidden="true" class="topnav__hamburger--closed"></button>
				<ul>
					<li class="topnav__logo">
						<a aria-label="Return to Furnace and Fugue home" href="../index.html"></a>
					</li>
					<li class="topnav__content">
						<ul>
							<li><a href="../atalanta-fugiens/toc_af.html">Digital Edition</a></li>
							<li><a href="../atalanta-essays/toc_essays.html">Essays</a></li>
							<li><a href="../search/toc_image-search.html">Images</a></li>
							<li><a href="../search/toc.html">Contents</a></li>
						</ul>
					</li>
					<li class="topnav__search"><button class="topnav__search--closed"><a href="#">
						<span class="icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 960 560" xml:space="preserve"><style type="text/css">.st0{fill:none;stroke:#fff; stroke-width:20;stroke-miterlimit:10;}</style><g id="handle"><g><path class="st0" d="M537.6,337.5l97,97L537.6,337.5z"/></g></g><g id="glass"><g><path class="st0" d="M480,153c33.9,0,65.8,13.2,89.8,37.2S607,246.1,607,280s-13.2,65.8-37.2,89.8S513.9,407,480,407s-65.8-13.2-89.8-37.2
						S353,313.9,353,280s13.2-65.8,37.2-89.8S446.1,153,480,153 M480,143c-75.7,0-137,61.3-137,137s61.3,137,137,137s137-61.3,137-137
						S555.7,143,480,143L480,143z"/></g></g></svg></span><span class="label">Search</span>
					</a></button></li>
				</ul>
			</nav>
		</div>
	</header>
	<main>
		<div class="search__modal" aria-hidden="true">
			<button class="x-close"></button>
			<div class="search__bar">
				<label class="label search__bar__label" for="search-field">Enter your search below</label>
				<input type="text" id="search__bar__field">
				<button class="submit" type="submit">Search</button>
			</div>
		</div>

	</main>
<!-- JS -->
	<script src="../assets/js/vendors/jquery/jquery-3.3.1.min.js"></script>
<script>
		$(function() {
			$('.topnav__search button').click(function() {
				if( $('.topnav__search button').hasClass('topnav__search--closed') ) {
					
					$('.topnav__search button').removeClass('topnav__search--closed');
					$('.topnav__search button').addClass('topnav__search--open');
			$('div.search__modal').attr('aria-hidden', 'false');
					$('div.search__modal').addClass('search__modal--slide-in');
					$('div.search__modal').removeClass('search__modal--slide-out');
					$('body').addClass('no-scroll');
					console.log("I am openining the search bar");

				}
				else if( $('.topnav__search button').hasClass('topnav__search--open') ) {
					console.log("The search bar is already closed");
					$('.topnav__search button').removeClass('topnav__search--open');
					$('.topnav__search button').addClass('topnav__search--closed');
$('div.search__modal').attr('aria-hidden', 'true');
					$('div.search__modal').addClass('search__modal--slide-out');
					$('div.search__modal').removeClass('search__modal--slide-in');
					$('body').removeClass('no-scroll');
				}
				else {
					console.log("THE SEARCH BUTTON HAS NO STATE");
				}
			});
			$('button.x-close > svg').click(function(e) {
				e.stopPropagation();
				e.preventDefault();
			});
			$('button.x-close').click(function() {
				console.log("I am clicking the search close button");
				$('.topnav__search button').removeClass('topnav__search--open');
				$('.topnav__search button').addClass('topnav__search--closed');
		$('div.search__modal').attr('aria-hidden', 'true');
				$('div.search__modal').addClass('search__modal--slide-out');
				$('div.search__modal').removeClass('search__modal--slide-in');
				$('body').removeClass('no-scroll');
			});
			$('input:text').focus(function() {
				$(this).val('');
			});
			$(document).keydown(function(event) {
				if(event.keyCode == 27) {
					$('.topnav__search button').removeClass('topnav__search--open');
					$('.topnav__search button').addClass('topnav__search--closed');
		$('div.search__modal').attr('aria-hidden', 'true');
					$('div.search__modal').addClass('search__modal--slide-out');
					$('div.search__modal').removeClass('search__modal--slide-in');
					$('body').removeClass('no-scroll');
				}
			});
		});
	</script>

</body>
</html>